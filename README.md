# SuperBenchmark API

SuperBenchmark is a **FastAPI** application designed to manage and query benchmarking results for a Large Language Model (LLM).
**This project was created for demonstration and learning purposes.**

---

## Features

- **Get all results**: Retrieve a full list of benchmark records.
- **Calculate averages**: Compute average statistics across all results.
- **Time-windowed averages**: Filter results by a specific time window and calculate averages.
- **Debug mode**: Load data from a local `test_database.json` for easy development and testing.
- **Configuration via environment variables**.

---

## Endpoints

The API provides the following endpoints :

| Method | URL                | Description |
|---|--------------------|---|
| `GET` | `/`                | Returns all benchmarking results. |
| `GET` | `/results/average` | Returns the average performance statistics across all results. An optional time window can be specified using `start_time` and `end_time` query parameters. |

**Query Parameters for `/average`:**

- `start_time` (optional): The start time for the time window.
- `end_time` (optional): The end time for the time window.

**Example:** `GET /results/average?start_time=2024-06-01T12:00:00&end_time=2024-06-01T14:00:00`

---

## Data Fields

Each benchmarking result includes the following fields:

- `request_id`: Unique identifier for the benchmarking request.
- `prompt_text`: The input prompt text used for the LLM.
- `generated_text`: The output text generated by the LLM.
- `token_count`: The number of tokens in the generated text.
- `time_to_first_token`: The time taken to generate the first token (in milliseconds).
- `time_per_output_token`: The average time per output token (in milliseconds).
- `total_generation_time`: The total time to generate the response (in milliseconds).
- `timestamp`: The timestamp when the benchmarking result was recorded.

---

## Setup & Run

1.  **Clone the repository**
2.  **Create and activate a virtual environment**
3.  **Install dependencies**
4.  **Configure environment variables**
5.  **Run the application:**
    ```bash
    python -m src.app.main --reload
    ```

The application will be available at `http://127.0.0.1:8000`.

---

## Development

This project uses `pre-commit` for code quality. To set it up, run:
```bash
pre-commit install
```
